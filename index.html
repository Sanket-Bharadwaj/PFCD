<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PFCD Lab Exam Portal</title>

  <style>
    /* =======================
       Ubuntu/Jupyter-like Theme
       (Offline - no CDN)
    ======================== */

    :root{
      --bg: #0f0f0f;
      --surface: #141414;
      --card: #161616;

      --text: #f2f2f2;
      --muted: #b8b8b8;

      --border: rgba(255,255,255,.12);
      --shadow: none;

      --primary: #e95420; /* Ubuntu orange */
      --primarySoft: rgba(233,84,32,.12);

      --radius: 12px;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    html[data-theme="light"]{
      --bg: #f5f5f5;
      --surface: #ffffff;
      --card: #ffffff;

      --text: #111827;
      --muted: #4b5563;

      --border: rgba(0,0,0,.12);
      --shadow: none;

      --primary: #2563eb;
      --primarySoft: rgba(37,99,235,.10);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: var(--sans);
      background: var(--bg);
      color: var(--text);
    }

    header{
      position: sticky;
      top:0;
      z-index:50;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
    }

    .container{
      max-width: 1150px;
      margin: 0 auto;
      padding: 16px;
    }

    .top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      padding: 10px 0 14px;
    }

    .brand h1{
      margin:0;
      font-size: 16px;
      letter-spacing:.2px;
    }
    .brand p{
      margin:6px 0 0;
      font-size: 12px;
      color: var(--muted);
      line-height:1.35;
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
      flex:1;
      min-width: 280px;
    }

    .search{
      display:flex;
      align-items:center;
      gap:10px;
      border: 1px solid var(--border);
      background: var(--surface);
      border-radius: var(--radius);
      padding: 10px 12px;
      min-width: min(560px, 100%);
    }

    .search input{
      width: 100%;
      border: none;
      outline: none;
      background: transparent;
      color: var(--text);
      font-size: 14px;
    }

    .btn{
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      font-size: 13px;
      transition: .12s ease;
    }
    .btn:hover{
      border-color: rgba(233,84,32,.40);
      transform: translateY(-1px);
    }
    .btn.primary{
      border-color: rgba(233,84,32,.45);
      background: var(--primarySoft);
    }

    .row2{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
      width:100%;
    }

    .chipRow{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      width:100%;
    }

    .chip{
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      padding: 7px 10px;
      border-radius: 999px;
      cursor:pointer;
      font-size: 12px;
      font-weight: 700;
    }
    .chip:hover{
      border-color: rgba(233,84,32,.45);
      color: var(--text);
    }

    .grid{
      display:grid;
      grid-template-columns: 330px 1fr;
      gap: 16px;
      padding: 16px 0 50px;
    }

    @media (max-width: 960px){
      .grid{ grid-template-columns: 1fr; }
    }

    .panel{
      border: 1px solid var(--border);
      background: var(--surface);
      border-radius: var(--radius);
      overflow:hidden;
    }

    .panelHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 12px 14px;
      border-bottom: 1px solid var(--border);
    }

    .panelHead h2{
      margin:0;
      font-size: 12px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: .7px;
    }

    .badge{
      font-size: 12px;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      color: var(--muted);
      background: transparent;
    }

    /* LEFT sets scroll */
    .setList{
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap:10px;

      max-height: 70vh;
      overflow: auto;
    }

    /* FIX: set text always visible */
    .setBtn{
      width: 100%;
      text-align:left;
      border: 1px solid var(--border);
      background: var(--surface);
      border-radius: var(--radius);
      padding: 12px;
      cursor:pointer;
      transition:.12s ease;
      color: var(--text);
    }
    .setBtn:hover{
      border-color: rgba(233,84,32,.35);
    }
    .setBtn.active{
      border-color: rgba(233,84,32,.55);
      background: var(--primarySoft);
    }

    .setTitleRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .setTitleRow b{
      font-size: 14px;
      color: var(--text);
    }
    .setDesc{
      margin-top:6px;
      font-size: 12px;
      color: var(--muted);
      line-height:1.35;
    }

    /* RIGHT questions scroll */
    #questionContainer{
      padding: 14px;
      max-height: 72vh;
      overflow: auto;
    }

    .qCard{
      border: 1px solid var(--border);
      background: var(--card);
      border-radius: var(--radius);
      padding: 14px;
      margin-bottom: 14px;
    }

    html[data-theme="light"] .qCard{
      background: #fafafa;
    }

    .qTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    .qTop h3{
      margin:0;
      font-size: 15px;
      line-height: 1.35;
      font-weight: 800;
    }

    .pill{
      font-size: 11px;
      border: 1px solid var(--border);
      padding: 6px 10px;
      border-radius: 999px;
      color: var(--muted);
      white-space: nowrap;
    }

    .opts{
      margin: 10px 0;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px dashed var(--border);
      color: var(--muted);
      background: transparent;
      font-size: 13px;
      line-height:1.5;
    }

    pre{
      margin:0;
      border: 1px solid var(--border);
      background: rgba(0,0,0,.35);
      border-radius: 10px;
      padding: 12px;
      overflow:auto;
      font-family: var(--mono);
      font-size: 12.8px;
      line-height: 1.4;
      white-space: pre-wrap;
      word-wrap: break-word;
      color: var(--text);
    }

    html[data-theme="light"] pre{
      background: #f8fafc;
      color: #111827;
    }

    .qActions{
      display:flex;
      gap:10px;
      margin-top: 10px;
      flex-wrap:wrap;
    }

    .hint{
      padding: 12px 14px;
      font-size: 12px;
      color: var(--muted);
      border-top: 1px solid var(--border);
      line-height: 1.35;
    }

    .toast{
      position: fixed;
      right: 14px;
      bottom: 14px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 9px 12px;
      font-size: 13px;
      display:none;
    }
    .toast.show{ display:block; }

    /* Mobile refinements */
    @media (max-width: 520px){
      .search{ min-width: 100%; }
      .btn{ width: 100%; }
      .controls{ width: 100%; }
      .qTop{ flex-direction: column; }
      .pill{ align-self:flex-start; }
      #questionContainer{ max-height: unset; }
      .setList{ max-height: unset; }
    }

    /* Print mode (offline backup as PDF) */
    @media print{
      header, .panel:first-child{ display:none; }
      body{ background:white; color:black; }
      pre{ background:white !important; color:black !important; }
      .qCard{ page-break-inside: avoid; }
    }
  </style>
</head>

<body>
  <header>
    <div class="container">
      <div class="top">
        <div class="brand">
          <h1>PFCD Lab Exam Portal</h1>
          <p>
            ✅ Set-wise solutions • Full questions • Copy fast<br>
            ✅ Works offline (single HTML) • Theme switcher
          </p>
        </div>

        <div class="controls">
          <div class="search">
            <input id="searchInput" placeholder="Search: numpy / duplicate / prime / file / exception / dict ..." />
            <button class="btn" id="clearBtn">Clear</button>
          </div>

          <div class="row2">
            <button class="btn primary" id="themeBtn">Toggle Theme</button>
            <button class="btn" id="searchModeBtn">Search: Active Set</button>
          </div>

          <div class="chipRow" id="chipRow"></div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <!-- LEFT -->
      <section class="panel">
        <div class="panelHead">
          <h2>Sets</h2>
          <span class="badge" id="countBadge">0 Questions</span>
        </div>

        <div class="setList" id="setList"></div>

        <div class="hint">
          ✅ Offline tip: save this page as file and open anytime.<br>
          ✅ Print option: Ctrl+P / Cmd+P → Save as PDF.
        </div>
      </section>

      <!-- RIGHT -->
      <section class="panel">
        <div class="panelHead">
          <h2 id="activeSetTitle">SET</h2>
          <span class="badge">Ready</span>
        </div>

        <div id="questionContainer"></div>

        <div class="hint">
          Copy options:
          <b>Copy Full</b> = question + full code.
          <b>Copy Clean</b> = code only (no sample output/comment block).
        </div>
      </section>
    </div>
  </main>

  <div class="toast" id="toast">Copied ✅</div>

  <script>
    /* =======================
       DATA (Set-wise)
       (Offline embedded)
    ======================== */
    const DATA = [
      {
        set: "SET-1",
        desc: "Lists + NumPy",
        questions: [
          {
            title: "Q1: (a) Write a Python program to remove duplicate elements from a list while maintaining the original order. (b) Write a Python program to find the second largest element in a list without using built-in functions like max() or sort().",
            options: [],
            code: `# =========================
# SET-1 : Q1
# =========================
# Q1:
# a) Write a Python program to remove duplicate elements from a list while maintaining the original order.
# b) Write a Python program to find the second largest element in a list without using built-in functions like max() or sort().

# -------- Q1(a) --------
nums = [1, 2, 3, 4, 5, 2, 3, 4]
seen = set()
unique = []
for x in nums:
    if x not in seen:
        unique.append(x)
        seen.add(x)

print("Q1(a) Output")
print("Original List:", nums)
print("List after removing duplicates (order preserved):", unique)
print()

# -------- Q1(b) --------
nums2 = [10, 5, 20, 8, 20, 3]
first = None
second = None

for x in nums2:
    if first is None or x > first:
        second = first
        first = x
    elif x != first and (second is None or x > second):
        second = x

print("Q1(b) Output")
print("List:", nums2)
print("Second largest element (without max/sort):", second)
`
          },
          {
            title: "Q2: (a) Using NumPy, write a program to calculate the average temperature of a week and count how many days had temperature above average. (b) Given a 2D NumPy array representing weekly sales (rows: products, columns: weeks), write a program to: (i) Calculate total sales for each product (ii) Identify the product with the highest total sales.",
            options: [],
            code: `# =========================
# SET-1 : Q2
# =========================
# Q2:
# a) Using NumPy, write a program to calculate the average temperature of a week and count how many days had temperature above average.
# b) Given a 2D NumPy array representing weekly sales (rows: products, columns: weeks), write a program to:
#    (i) Calculate total sales for each product
#    (ii) Identify the product with the highest total sales

import numpy as np

# -------- Q2(a) --------
temps = np.array([28, 30, 31, 29, 27, 32, 26])
avg_temp = temps.mean()
days_above_avg = np.sum(temps > avg_temp)

print("Q2(a) Output")
print("Weekly Temperatures:", temps)
print("Average Temperature:", avg_temp)
print("Number of days above average:", days_above_avg)
print()

# -------- Q2(b) --------
sales = np.array([
    [10, 12, 9, 11],
    [8,  7, 10, 9],
    [15, 14, 13, 12]
])

total_sales_per_product = np.sum(sales, axis=1)
highest_product_index = np.argmax(total_sales_per_product)

print("Q2(b) Output")
print("Sales Array (Products x Weeks):")
print(sales)
print("Total Sales for each product:", total_sales_per_product)
print("Product with highest total sales (1-based):", highest_product_index + 1)
`
          }
        ]
      },

      {
        set: "SET-3",
        desc: "Strings + Lists",
        questions: [
          {
            title: `Q1: Consider the following string: quote = "In the middle of difficulty lies opportunity"
(a) Count the number of words in the quote
(b) Remove all vowels (a, e, i, o, u) from the quote
(c) Replace "difficulty" with "challenge" and "opportunity" with "possibility"
(d) Sort the words of the quote based on their length (ascending order)`,
            options: [],
            code: `# =========================
# SET-3 : Q1
# =========================
quote = "In the middle of difficulty lies opportunity"

words = quote.split()
print("(a) Word count:", len(words))

vowels = "aeiouAEIOU"
no_vowels = "".join(ch for ch in quote if ch not in vowels)
print("(b) Without vowels:", no_vowels)

replaced = quote.replace("difficulty", "challenge").replace("opportunity", "possibility")
print("(c) Replaced:", replaced)

sorted_words = sorted(words, key=len)
print("(d) Words sorted by length:", sorted_words)
`
          },

          {
            title: `Q2: Given two lists:
StudentIDs = [201, 202, 203, 204, 205, 206, 207]
Scores     = [85, 92, 78, 64, 88, 91, 73]
(a) Find all StudentIDs who scored 75 or above
(b) Calculate the average score without using built-in functions
(c) Find the StudentID with the lowest score without using built-in functions`,
            options: [],
            code: `# =========================
# SET-3 : Q2
# =========================
StudentIDs = [201, 202, 203, 204, 205, 206, 207]
Scores     = [85, 92, 78, 64, 88, 91, 73]

eligible = []
for i in range(len(Scores)):
    if Scores[i] >= 75:
        eligible.append(StudentIDs[i])
print("(a) IDs scoring >= 75:", eligible)

total = 0
count = 0
for s in Scores:
    total += s
    count += 1
avg = total / count
print("(b) Average score:", avg)

min_score = Scores[0]
min_id = StudentIDs[0]
for i in range(1, len(Scores)):
    if Scores[i] < min_score:
        min_score = Scores[i]
        min_id = StudentIDs[i]
print("(c) Lowest StudentID:", min_id, "Score:", min_score)
`
          }
        ]
      },

      {
        set: "SET-4",
        desc: "Sentence + Dictionary",
        questions: [
          {
            title: `Q1: Given the sentence:
sentence = "The quick brown fox jumps over the lazy dog"
(a) Remove duplicate characters from the sentence while preserving the first occurrence
(b) Count the frequency of each character (case-insensitive) using a dictionary (ignore spaces)
(c) Find the longest word in the sentence and count the number of vowels in it
(d) Reverse the order of words in the sentence`,
            options: [],
            code: `# =========================
# SET-4 : Q1
# =========================
sentence = "The quick brown fox jumps over the lazy dog"

seen = set()
unique_chars = []
for ch in sentence:
    if ch not in seen:
        unique_chars.append(ch)
        seen.add(ch)
print("(a) Without duplicate characters:", "".join(unique_chars))

freq = {}
for ch in sentence.lower():
    if ch == " ":
        continue
    freq[ch] = freq.get(ch, 0) + 1
print("(b) Frequency dict:", freq)

words = sentence.split()
longest = words[0]
for w in words[1:]:
    if len(w) > len(longest):
        longest = w

vowels = "aeiouAEIOU"
vowel_count = 0
for ch in longest:
    if ch in vowels:
        vowel_count += 1
print("(c) Longest word:", longest, "| Vowels:", vowel_count)

print("(d) Reverse word order:", " ".join(words[::-1]))
`
          },

          {
            title: `Q2: Given:
ProductIDs = [101, 102, 103, 104, 105, 106, 107]
Prices     = [250, 400, 150, 300, 450, 200, 350]
(a) Create a dictionary mapping each ProductID to its corresponding Price
(b) Find the ProductID with the highest price without using built-in functions
(c) Calculate the total price of all products without using sum()`,
            options: [],
            code: `# =========================
# SET-4 : Q2
# =========================
ProductIDs = [101, 102, 103, 104, 105, 106, 107]
Prices     = [250, 400, 150, 300, 450, 200, 350]

price_map = {}
for i in range(len(ProductIDs)):
    price_map[ProductIDs[i]] = Prices[i]
print("(a) ProductID -> Price:", price_map)

max_price = Prices[0]
max_id = ProductIDs[0]
for i in range(1, len(Prices)):
    if Prices[i] > max_price:
        max_price = Prices[i]
        max_id = ProductIDs[i]
print("(b) Highest price ProductID:", max_id, "Price:", max_price)

total = 0
for p in Prices:
    total += p
print("(c) Total price:", total)
`
          }
        ]
      },

      {
        set: "SET-5",
        desc: "Lambda + Prime + Menu",
        questions: [
          {
            title: `Q1:
(A) Write a Python program that:
1) Takes a list as input
2) Removes duplicates while preserving the original order
3) Selects only odd numbers using lambda
4) Finds cubes of odd numbers using lambda
5) Finds the sum of cubes of odd numbers
(B) Write a Python program to check whether a given number is prime or not.`,
            options: [],
            code: `# =========================
# SET-5 : Q1
# =========================

# (A)
nums = [1, 2, 3, 4, 5, 2, 3, 4]
seen = set()
unique = []
for x in nums:
    if x not in seen:
        unique.append(x)
        seen.add(x)

odd_nums = list(filter(lambda x: x % 2 == 1, unique))
cubes = list(map(lambda x: x**3, odd_nums))

sum_cubes = 0
for c in cubes:
    sum_cubes += c

print("Q1(A) Output")
print("Original:", nums)
print("Unique:", unique)
print("Odd:", odd_nums)
print("Cubes:", cubes)
print("Sum of cubes:", sum_cubes)
print()

# (B)
n = 29
if n <= 1:
    print("Q1(B) Output")
    print(n, "is NOT prime")
else:
    is_prime = True
    i = 2
    while i*i <= n:
        if n % i == 0:
            is_prime = False
            break
        i += 1
    print("Q1(B) Output")
    print(n, "is prime" if is_prime else "is NOT prime")
`
          },

          {
            title: `Q2:
(a) Write a program to read First Name and Last Name and print the message:
"Hello <First Name> <Last Name> Welcome to python programming."
(b) Write a program to input a number of seconds and convert into Days, Hours, Minutes and Seconds
(c) Write a program to implement the dictionary:
WeatherConditions = {"a":"Sunny","b":"Cloudy","c":"Rainy","d":"Snowy","e":"Foggy"}
Give the user choices and print the corresponding weather condition.`,
            options: [
              "a) Sunny",
              "b) Cloudy",
              "c) Rainy",
              "d) Snowy",
              "e) Foggy"
            ],
            code: `# =========================
# SET-5 : Q2
# =========================

# (a)
first = "John"
last = "Doe"
print("(a) Greeting:")
print(f"Hello {first} {last} Welcome to python programming.")
print()

# (b)
total_seconds = 100000
days = total_seconds // (24*3600)
rem = total_seconds % (24*3600)
hours = rem // 3600
rem = rem % 3600
minutes = rem // 60
seconds = rem % 60

print("(b) Conversion:")
print("Input seconds:", total_seconds)
print("Days:", days)
print("Hours:", hours)
print("Minutes:", minutes)
print("Seconds:", seconds)
print()

# (c)
WeatherConditions = {"a":"Sunny","b":"Cloudy","c":"Rainy","d":"Snowy","e":"Foggy"}

print("(c) Options:")
print("a) Sunny")
print("b) Cloudy")
print("c) Rainy")
print("d) Snowy")
print("e) Foggy")

choice = "d"
if choice in WeatherConditions:
    print("Current weather condition is:", WeatherConditions[choice])
else:
    print("Invalid choice")
`
          }
        ]
      },

      {
        set: "SET-6",
        desc: "Functions + Perfect/Leap",
        questions: [
          {
            title: `Q1:
(A) Write a function that takes first name, middle name, and last name as input and returns the name formatted as:
"Last, First Middle" (Capitalize properly)
(B) Implement the dictionary:
Designation = {"a":"Professor","b":"Associate Professor","c":"Assistant Professor","d":"Sr. Lab Technician","e":"Jr. Lab Technician"}
Display options and print designation based on user choice.`,
            options: [
              "a) Professor",
              "b) Associate Professor",
              "c) Assistant Professor",
              "d) Sr. Lab Technician",
              "e) Jr. Lab Technician"
            ],
            code: `# =========================
# SET-6 : Q1
# =========================

# (A)
def format_name(first, middle, last):
    first = first.strip().capitalize()
    middle = middle.strip().capitalize()
    last = last.strip().capitalize()
    if middle == "":
        return f"{last}, {first}"
    return f"{last}, {first} {middle}"

print("Q1(A) Output")
print(format_name("abc", "", "xyz"))
print(format_name("abc", "mno", "xyz"))
print()

# (B)
Designation = {
    "a":"Professor",
    "b":"Associate Professor",
    "c":"Assistant Professor",
    "d":"Sr. Lab Technician",
    "e":"Jr. Lab Technician"
}

print("Q1(B) Options:")
print("a) Professor")
print("b) Associate Professor")
print("c) Assistant Professor")
print("d) Sr. Lab Technician")
print("e) Jr. Lab Technician")

choice = "b"
if choice in Designation:
    print("Designation is:", Designation[choice])
else:
    print("Invalid choice")
`
          },

          {
            title: `Q2:
(a) Write a function to check whether a given number is a Perfect Number or not.
(b) Write a program to check whether a given year is a Leap Year or not.`,
            options: [],
            code: `# =========================
# SET-6 : Q2
# =========================

# (a) Perfect Number
def is_perfect(n):
    if n <= 1:
        return False
    s = 1
    i = 2
    while i*i <= n:
        if n % i == 0:
            s += i
            if i != n // i:
                s += n // i
        i += 1
    return s == n

num = 28
print("(a) Perfect check:", "Perfect" if is_perfect(num) else "Not Perfect")
print()

# (b) Leap Year
year = 2024
if (year % 400 == 0) or (year % 4 == 0 and year % 100 != 0):
    print("(b) Leap year:", year, "is Leap Year")
else:
    print("(b) Leap year:", year, "is NOT Leap Year")
`
          }
        ]
      },

      {
        set: "SET-7",
        desc: "Exception + File Handling",
        questions: [
          {
            title: `Q1: Write a program to divide two numbers using exception handling:
(a) Divide two numbers
(b) Handle divide by zero error
(c) Handle invalid input
If no exception occurs, print "Program executed successfully"`,
            options: [],
            code: `# =========================
# SET-7 : Q1
# =========================
try:
    a = float(input("Enter first number: "))
    b = float(input("Enter second number: "))

    result = a / b
    print("Result:", result)
    print("Program executed successfully")

except ZeroDivisionError:
    print("Error: Cannot divide by zero!")

except ValueError:
    print("Error: Invalid input! Please enter numeric values.")
`
          },

          {
            title: `Q2:
Program 1:
Read a file containing student names and marks (5 subjects).
Calculate total marks and percentage for each student.
Write only those students with percentage >= 60 to an output file.

Program 2:
Read the output file and calculate:
(a) Highest percentage
(b) Average percentage
Write this summary into another file.`,
            options: [],
            code: `# =========================
# SET-7 : Q2
# =========================

input_file = "students_input.txt"
output_file = "students_output.txt"
summary_file = "summary.txt"

sample_data = [
    "Amit 80 75 90 85 70",
    "Riya 55 60 58 62 59",
    "John 90 92 88 95 91",
    "Neha 60 60 60 60 60"
]

with open(input_file, "w") as f:
    for line in sample_data:
        f.write(line + "\\n")

# Program 1
with open(input_file, "r") as fin, open(output_file, "w") as fout:
    for line in fin:
        parts = line.split()
        name = parts[0]
        marks = [int(x) for x in parts[1:]]

        total = 0
        for m in marks:
            total += m

        percentage = total / len(marks)

        if percentage >= 60:
            fout.write(f"{name} {total} {percentage:.2f}\\n")

print("Program 1 completed ->", output_file)

# Program 2
percentages = []
with open(output_file, "r") as f:
    for line in f:
        parts = line.split()
        percentages.append(float(parts[2]))

if len(percentages) > 0:
    highest = percentages[0]
    sum_p = 0
    for p in percentages:
        sum_p += p
        if p > highest:
            highest = p
    avg_p = sum_p / len(percentages)
else:
    highest = 0
    avg_p = 0

with open(summary_file, "w") as f:
    f.write(f"Highest Percentage: {highest:.2f}\\n")
    f.write(f"Average Percentage: {avg_p:.2f}\\n")

print("Program 2 completed ->", summary_file)
`
          }
        ]
      }
    ];

    /* =======================
       UI Logic
    ======================== */
    const $ = (id) => document.getElementById(id);

    const setList = $("setList");
    const questionContainer = $("questionContainer");
    const activeSetTitle = $("activeSetTitle");
    const countBadge = $("countBadge");
    const searchInput = $("searchInput");
    const toast = $("toast");

    const chipRow = $("chipRow");

    let activeSet = DATA[0].set;
    let searchModeAll = false; // false = active set only

    const CHIP_KEYWORDS = ["duplicate", "numpy", "prime", "file", "exception", "dictionary", "lambda", "string"];

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 900);
    }

    function escapeHTML(str){
      return str.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
    }

    // Copy helpers
    function cleanCode(code){
      // Removes lines that look like sample output blocks (optional, safe)
      const lines = code.split("\n");
      const filtered = lines.filter(line => {
        const t = line.trim();
        if (t.startsWith("# Sample Output")) return false;
        if (t.startsWith("# Output")) return false;
        if (t.startsWith("# Example Output")) return false;
        return true;
      });
      return filtered.join("\n").trim() + "\n";
    }

    window.copyFull = function(setName, idx){
      const setObj = DATA.find(x=>x.set===setName);
      const item = setObj.questions[idx];
      navigator.clipboard.writeText(item.code).then(()=>{
        showToast("Copied Full ✅");
      }).catch(()=>showToast("Copy failed ❌"));
    }

    window.copyClean = function(setName, idx){
      const setObj = DATA.find(x=>x.set===setName);
      const item = setObj.questions[idx];
      navigator.clipboard.writeText(cleanCode(item.code)).then(()=>{
        showToast("Copied Clean ✅");
      }).catch(()=>showToast("Copy failed ❌"));
    }

    function renderChips(){
      chipRow.innerHTML = "";
      CHIP_KEYWORDS.forEach(k=>{
        const c = document.createElement("button");
        c.className = "chip";
        c.textContent = k;
        c.onclick = ()=>{
          searchInput.value = k;
          renderQuestions();
        };
        chipRow.appendChild(c);
      });
    }

    function renderSets(){
      setList.innerHTML = "";
      DATA.forEach((s)=>{
        const btn = document.createElement("button");
        btn.className = "setBtn" + (s.set === activeSet ? " active" : "");
        btn.onclick = ()=>{
          activeSet = s.set;
          renderSets();
          renderQuestions();
        };

        btn.innerHTML = `
          <div class="setTitleRow">
            <b>${s.set}</b>
            <span class="badge">${s.questions.length} Q</span>
          </div>
          <div class="setDesc">${s.desc}</div>
        `;
        setList.appendChild(btn);
      });
    }

    function renderQuestions(){
      const query = searchInput.value.trim().toLowerCase();
      questionContainer.innerHTML = "";

      // Decide which sets to scan
      const setsToRender = searchModeAll ? DATA : [DATA.find(x=>x.set===activeSet)];

      if(!searchModeAll){
        const setObj = DATA.find(x=>x.set===activeSet);
        activeSetTitle.textContent = setObj.set;
        countBadge.textContent = setObj.questions.length + " Questions";
      }else{
        activeSetTitle.textContent = "ALL SETS";
        let totalQ = 0;
        DATA.forEach(s=> totalQ += s.questions.length);
        countBadge.textContent = totalQ + " Questions";
      }

      let shown = 0;

      setsToRender.forEach((setObj)=>{
        setObj.questions.forEach((item, idx)=>{
          const searchable = (setObj.set + " " + item.title + " " + item.code).toLowerCase();
          if(query && !searchable.includes(query)) return;

          shown++;

          const opts = item.options && item.options.length
            ? `<div class="opts">
                <b>Options:</b><br>
                ${item.options.map(o => `• ${escapeHTML(o)}`).join("<br>")}
              </div>`
            : "";

          const card = document.createElement("div");
          card.className = "qCard";
          card.innerHTML = `
            <div class="qTop">
              <h3>${escapeHTML(item.title)}</h3>
              <span class="pill">${setObj.set} • Q${idx+1}</span>
            </div>
            ${opts}
            <pre>${escapeHTML(item.code)}</pre>
            <div class="qActions">
              <button class="btn primary" onclick="copyFull('${setObj.set}', ${idx})">Copy Full</button>
              <button class="btn" onclick="copyClean('${setObj.set}', ${idx})">Copy Clean</button>
            </div>
          `;
          questionContainer.appendChild(card);
        });
      });

      if(shown === 0){
        questionContainer.innerHTML = `
          <div class="qCard">
            <div class="qTop">
              <h3>No results found</h3>
              <span class="pill">Search</span>
            </div>
            <div class="opts">
              Try: <b>numpy</b>, <b>duplicate</b>, <b>prime</b>, <b>file</b>, <b>exception</b>, <b>dictionary</b>
            </div>
          </div>
        `;
      }
    }

    /* =======================
       Theme Switcher (Offline)
    ======================== */
    function setTheme(t){
      document.documentElement.setAttribute("data-theme", t);
      localStorage.setItem("pfcd_theme", t);
    }

    const savedTheme = localStorage.getItem("pfcd_theme");
    if(savedTheme === "light" || savedTheme === "dark"){
      setTheme(savedTheme);
    }else{
      setTheme("dark");
    }

    $("themeBtn").onclick = ()=>{
      const current = document.documentElement.getAttribute("data-theme");
      setTheme(current === "dark" ? "light" : "dark");
    };

    /* Search mode toggle */
    function updateSearchModeBtn(){
      $("searchModeBtn").textContent = searchModeAll ? "Search: All Sets" : "Search: Active Set";
    }

    $("searchModeBtn").onclick = ()=>{
      searchModeAll = !searchModeAll;
      updateSearchModeBtn();
      renderQuestions();
    };

    $("clearBtn").onclick = ()=>{
      searchInput.value = "";
      renderQuestions();
    };

    searchInput.addEventListener("input", renderQuestions);

    renderChips();
    renderSets();
    updateSearchModeBtn();
    renderQuestions();
  </script>
</body>
</html>
